(function(){"use strict";var t={1271:function(t,e,o){var s=o(7195),i=function(){var t=this,e=t._self._c;return e("div",{staticClass:"app"},[e("div",{ref:"messages",staticClass:"messages"},t._l(t.messages,(function(o){return e("Message",{key:o.id,class:["message",{right:o.isMine}],attrs:{dark:o.isMine,text:o.text,author:o.author,actions:o.actions,list_items:t.messages.list_items},on:{onActionSelect:t.onActionSelectEvent}})})),1),e("ChatBox",{staticClass:"chat-box",on:{submit:t.onSubmit}}),t.user?t._e():e("RegisterDialog",{on:{submit:t.onRegister}})],1)},a=[],n=(o(7658),function(){var t=this,e=t._self._c;return e("div",{class:["message",{dark:t.dark}]},[e("h5",[t._v(t._s(t.author))]),t._v(" "+t._s(t.text)+" "),t._l(t.actions,(function(o,s){return e("p",{key:s,staticClass:"pointer",on:{click:function(e){return t.$emit("onActionSelect",e,o)}}},[t._v(" ("+t._s(s+1)+") "+t._s(o.label)+" "),o.showBookButton?e("button",{staticClass:"pointer"},[t._v(" Book ")]):t._e(),o.showCheckStatusButton?e("button",{staticClass:"pointer"},[t._v(" Status ")]):t._e(),o.showTalkToAgentButton?e("button",{staticClass:"pointer"},[t._v(" Click Here ")]):t._e()])})),t._l(t.list_items,(function(o,s){return e("p",{key:s},[t._v(" "+t._s(o.label)+" ")])}))],2)}),r=[],l={name:"Message",props:["text","author","dark","actions","list_items"]},h=l,u=o(3736),c=(0,u.Z)(h,n,r,!1,null,"71fec612",null),g=c.exports,m=function(){var t=this,e=t._self._c;return e("form",{staticClass:"chat-box",on:{submit:function(e){return t.onSubmit(e)}}},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.text,expression:"text"}],attrs:{placeholder:"Write a message",type:"text"},domProps:{value:t.text},on:{input:function(e){e.target.composing||(t.text=e.target.value)}}}),e("button",{attrs:{disabled:""===t.text}},[t._v("Send")])])},d=[],b={name:"ChatBox",data:()=>({text:""}),methods:{onSubmit(t){this.$emit("submit",t,this.text),this.text=""}}},p=b,_=(0,u.Z)(p,m,d,!1,null,"769cea4e",null),S=_.exports,A=function(){var t=this,e=t._self._c;return e("div",{staticClass:"register"},[e("div",{staticClass:"dialog"},[e("h5",[t._v("Welcome to Chat app")]),e("span",[t._v("Please enter your name, email id and phone number to initiate conversation:")]),e("form",{on:{submit:function(e){return t.$emit("submit",e,t.loginForm)}}},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.loginForm.fullName,expression:"loginForm.fullName"}],attrs:{placeholder:"Name",type:"text"},domProps:{value:t.loginForm.fullName},on:{input:function(e){e.target.composing||t.$set(t.loginForm,"fullName",e.target.value)}}}),e("input",{directives:[{name:"model",rawName:"v-model",value:t.loginForm.email,expression:"loginForm.email"}],attrs:{placeholder:"Email",type:"text"},domProps:{value:t.loginForm.email},on:{input:function(e){e.target.composing||t.$set(t.loginForm,"email",e.target.value)}}}),e("input",{directives:[{name:"model",rawName:"v-model",value:t.loginForm.phoneNumber,expression:"loginForm.phoneNumber"}],attrs:{placeholder:"Phone Number",type:"text"},domProps:{value:t.loginForm.phoneNumber},on:{input:function(e){e.target.composing||t.$set(t.loginForm,"phoneNumber",e.target.value)}}}),e("button",{attrs:{disabled:""===t.loginForm.fullName||""===t.loginForm.email||""===t.loginForm.phoneNumber}},[t._v(" Enter ")])])])])},f=[],k={name:"RegisterDialog",data:()=>({loginForm:{fullName:"",email:"",phoneNumber:""}}),methods:{onSubmit(){$emit("submit",$event,loginForm)}}},T=k,N=(0,u.Z)(T,A,f,!1,null,"4ec48de9",null),I=N.exports,B=o(1412);const v={HOME_PAGE:1,ASKING_BOOKING_ARRIVAL:2,ASKING_BOOKING_DIPARTURE:3,ASKING_BOOKING_DATE:4,SHOWING_AVAILABLE_FLIGHTS:5,THANKS_FOR_BOOKING:6,SHOWING_LIST_FOR_FLIGHT_STATUS:7,TALK_TO_AGENT:8};var O={BOT_STATUS:v},y=o(19),F=o(6891);const M="https://backend.airchatboat.devstrapp.com/",x={init(){console.log("init() callleed: "),s.ZP.use(F.Z,y.Z),s.ZP.axios.defaults.baseURL=M},get(t,e={}){let o={};return localStorage.getItem("userToken")&&(o["Authorization"]=`${localStorage.getItem("userToken")}`),s.ZP.axios.get(t,{headers:o,params:e})},post(t,e){let o={};return localStorage.getItem("userToken")&&(o["Authorization"]=`${localStorage.getItem("userToken")}`),s.ZP.axios.post(t,e,{headers:o})},put(t,e){let o={};return localStorage.getItem("userToken")&&(o["Authorization"]=`${localStorage.getItem("userToken")}`),s.ZP.axios.put(t,e,{headers:o})},patch(t,e){let o={};return localStorage.getItem("userToken")&&(o["Authorization"]=`${localStorage.getItem("userToken")}`),s.ZP.axios.patch(t,e,{headers:o})},update(t,e,o){let i={};return localStorage.getItem("userToken")&&(i["Authorization"]=`${localStorage.getItem("userToken")}`),s.ZP.axios.put(`${t}/${e}`,o,{headers:i})},delete(t){let e={};return localStorage.getItem("userToken")&&(e["Authorization"]=`${localStorage.getItem("userToken")}`),s.ZP.axios["delete"](t,{headers:e})}};var E=x;const G={async register(t){return await E.post("/users/register",t)},async availableFlights(t={}){return await E.get("/flights/available-flights",t)},async getFlightByID(t){return await E.get(`/flight_bookings/my-bookings/${t}`)},async getMyBookingFlights(t={}){return await E.get("/flight_bookings/my-bookings",t)},async flightCancel(t){return await E.post("/flight_bookings/cancel/",t)},async bookFlight(t){return await E.post("/flight_bookings/add",t)}};var w=G,P={name:"App",components:{RegisterDialog:I,ChatBox:S,Message:g},data:()=>({qParams:{},user:void 0,messages:[],botActions:[{key:"a",label:"Book a Flight "},{key:"b",label:"Modify a current Booking "},{key:"c",label:"Flight Status "},{key:"d",label:"Baggage claims "},{key:"e",label:"Online Check-in "},{key:"g",label:"Book cargo "},{key:"f",label:"My problem is not listed here "}],departureOptions:[{key:"1",label:"CPT CAPETOWN",location:"CAPETOWN"},{key:"2",label:"FRW FRANCISTOWN",location:"FRANCISTOWN"},{key:"3",label:"GBE GABARONE",location:"GABARONE"},{key:"4",label:"HRE HARARE",location:"HARARE"},{key:"5",label:"JNB JOHANNESBURG",location:"JOHANNESBURG"},{key:"6",label:"BBK KASANE",location:"KASANE"},{key:"7",label:"LUN LUKASA",location:"LUKASA"},{key:"8",label:"MUB  MAUN",location:"MAUN"}],arrivalOptions:[{key:"1",label:"CPT CAPETOWN",location:"CAPETOWN"},{key:"2",label:"FRW FRANCISTOWN",location:"FRANCISTOWN"},{key:"3",label:"GBE GABARONE",location:"GABARONE"},{key:"4",label:"HRE HARARE",location:"HARARE"},{key:"5",label:"JNB JOHANNESBURG",location:"JOHANNESBURG"},{key:"6",label:"BBK KASANE",location:"KASANE"},{key:"7",label:"LUN LUKASA",location:"LUKASA"},{key:"8",label:"MUB  MAUN",location:"MAUN"}],currentState:null,botStatus:O.BOT_STATUS,bookFlightForm:{departure:null,arrival:null,date:null,flight_id:null}}),created(){},methods:{onRegister(t,e){t.preventDefault(),console.log("loginForm: ",e);let o={email:e.email,full_name:e.fullName,phone_number:e.phoneNumber};w.register(o).then((t=>{console.log("response: ",t),localStorage.setItem("userToken",t.data.token),this.user={fullName:e.fullName,email:e.email,phoneNumber:e.phoneNumber,id:(0,B.Z)()},this.initChat()})).catch((t=>{console.log("error",t),s.ZP.$toast.open({message:"Something went wrong!",type:"error",position:"top"})}))},initChat(){this.messages.push({id:this.getMessageId(),isMine:!1,text:"Hello, Greetings of the Day! What can we help you with today? ",author:"Bot",actions:this.botActions}),this.currentState=this.botStatus.HOME_PAGE},getMessageId(){return this.messages.length+1},scrollToBotton(){s.ZP.nextTick((()=>{const t=this.$refs["messages"];t.scrollTo({behavior:"smooth",top:t.scrollHeight})}))},async onSubmit(t,e){t.preventDefault(),console.log("text: ",e),console.log("this.currentState: ",this.currentState),console.log("this.currentState == this.botStatus.ASKING_BOOKING_DATE: ",this.currentState==this.botStatus.ASKING_BOOKING_DATE),this.messages.push({id:this.getMessageId(),isMine:!0,text:e,author:this.user?.fullName}),this.scrollToBotton(),this.currentState==this.botStatus.ASKING_BOOKING_DATE&&(this.bookFlightForm.date=e,this.qParams={},this.qParams["departure"]=this.bookFlightForm.departure,this.qParams["arrival"]=this.bookFlightForm.arrival,this.qParams["from_date"]=this.bookFlightForm.date,this.bookFlightForm,console.log("this.qParams>>> ",this.qParams),setTimeout((()=>{console.log("Delayed for 1 second.")}),5e3),await w.availableFlights(this.qParams).then((t=>{console.log("response>>> ",t);let e=[];t.data.flight_list.forEach((t=>{e.push({key:t.id,showBookButton:!0,bookingID:t.id,label:`Airline: ${t.airline_name} - Flight Number: ${t.flight_number} - Arrival Time: ${t.arrival_time} - Departure Time: ${t.departure_time} `})})),e.length?(this.messages.push({id:this.getMessageId(),isMine:!1,text:`${this.bookFlightForm.departure} to ${this.bookFlightForm.arrival} available flights on ${this.bookFlightForm.date}`,author:"Bot",actions:e}),this.scrollToBotton(),this.currentState=this.botStatus.SHOWING_AVAILABLE_FLIGHTS):(this.messages.push({id:this.getMessageId(),isMine:!1,text:"No flights found for selected inputs.",author:"Bot"}),this.scrollToBotton(),this.currentState=this.botStatus.SHOWING_AVAILABLE_FLIGHTS,setTimeout((()=>{this.messages.push({id:this.getMessageId(),isMine:!1,text:"Do you need more help? ",author:"Bot",actions:this.botActions}),this.currentState=this.botStatus.HOME_PAGE,this.scrollToBotton()}),3e3))})).catch((t=>{console.log("error>>> ",t),this.messages.push({id:this.getMessageId(),isMine:!1,text:"Please enter valid Date. ",author:"Bot"}),this.scrollToBotton()})))},async onActionSelectEvent(t,e){if(console.log("selectedAction: ",e),this.currentState==this.botStatus.HOME_PAGE){let t=this.botActions.find((t=>t.key==e.key));console.log("action: ",t),t?"a"==t.key?(this.messages.push({id:this.getMessageId(),isMine:!1,text:"Book a Flight - Please fill in the details requested below",author:"Bot"}),this.messages.push({id:this.getMessageId(),isMine:!1,text:"Select Departure:",author:"Bot",actions:this.departureOptions}),this.scrollToBotton(),this.currentState=this.botStatus.ASKING_BOOKING_DIPARTURE):"b"==t.key?window.open("https://airbotswana.co.bw/","_blank"):"c"==t.key?(this.qParams=this.bookFlightForm,console.log("this.qParams>>> ",this.qParams),setTimeout((()=>{console.log("Delayed for 1 second.")}),1e3),await w.getMyBookingFlights(this.qParams).then((t=>{console.log("response>>> ",t);let e=[];t.data.booking_list.forEach((t=>{e.push({key:t.booking_id,bookingID:t.booking_id,showCheckStatusButton:!0,label:`Booking ID: ${t.booking_id} - Flight Number: ${t.flight.flight_number} - Airline: ${t.flight.airline_name}`})})),e.length?(this.messages.push({id:this.getMessageId(),isMine:!1,text:"Your booked flights:",author:"Bot",actions:e}),this.scrollToBotton(),this.currentState=this.botStatus.SHOWING_LIST_FOR_FLIGHT_STATUS):(this.messages.push({id:this.getMessageId(),isMine:!1,text:"No booking found.",author:"Bot"}),this.scrollToBotton(),this.currentState=this.botStatus.SHOWING_LIST_FOR_FLIGHT_STATUS,setTimeout((()=>{this.messages.push({id:this.getMessageId(),isMine:!1,text:"Do you need more help? ",author:"Bot",actions:this.botActions}),this.currentState=this.botStatus.HOME_PAGE,this.scrollToBotton()}),3e3))})).catch((t=>{console.log("error>>> ",t)}))):"d"==t.key||"e"==t.key?window.open("https://airbotswana.co.bw/","_blank"):"f"==t.key?(this.messages.push({id:this.getMessageId(),isMine:!1,text:"",author:"Bot",actions:[{key:"",label:"Talk to agent ",showTalkToAgentButton:!0}]}),this.currentState=this.botStatus.TALK_TO_AGENT,this.scrollToBotton()):"g"==t.key&&window.open("https://airbotswana.co.bw/","_blank"):(this.messages.push({id:this.getMessageId(),isMine:!1,text:"Please select valid option",author:"Bot",actions:this.botActions}),this.scrollToBotton())}else if(this.currentState==this.botStatus.ASKING_BOOKING_DIPARTURE)this.bookFlightForm.departure=e.location,this.messages.push({id:this.getMessageId(),isMine:!1,text:"Select Arrival:",author:"Bot",actions:this.arrivalOptions}),this.scrollToBotton(),this.currentState=this.botStatus.ASKING_BOOKING_ARRIVAL;else if(this.currentState==this.botStatus.ASKING_BOOKING_ARRIVAL)this.bookFlightForm.arrival=e.location,this.messages.push({id:this.getMessageId(),isMine:!1,text:"Enter Date (DD/MM/YYYY)",author:"Bot"}),this.scrollToBotton(),this.currentState=this.botStatus.ASKING_BOOKING_DATE;else if(this.currentState==this.botStatus.SHOWING_AVAILABLE_FLIGHTS){window.open("https://airbotswana.co.bw/","_blank"),this.bookFlightForm.arrival=e.boo;let t={};t["flight_id"]=e.bookingID,t["booking_date"]=this.bookFlightForm.date,await w.bookFlight(t).then((t=>{console.log("response>>> ",t)})).catch((t=>{console.log("error>>> ",t)})),this.messages.push({id:this.getMessageId(),isMine:!1,text:"Thank you for booking flight with us.",author:"Bot"}),this.scrollToBotton(),setTimeout((()=>{this.messages.push({id:this.getMessageId(),isMine:!1,text:"Do you need more help? ",author:"Bot",actions:this.botActions}),this.currentState=this.botStatus.HOME_PAGE,this.scrollToBotton()}),3e3)}else this.currentState==this.botStatus.SHOWING_LIST_FOR_FLIGHT_STATUS?await w.getFlightByID(e.bookingID).then((t=>{console.log("response>>> ",t);let e=`Flight #${t.data.booking_details.flight.flight_number} from ${t.data.booking_details.flight.origin_location} to ${t.data.booking_details.flight.destination_location} is ${t.data.booking_details.flight.status_message}`;this.messages.push({id:this.getMessageId(),isMine:!1,text:e,author:"Bot"}),this.scrollToBotton(),setTimeout((()=>{this.messages.push({id:this.getMessageId(),isMine:!1,text:"Do you need more help? ",author:"Bot",actions:this.botActions}),this.currentState=this.botStatus.HOME_PAGE,this.scrollToBotton()}),3e3)})).catch((t=>{console.log("error>>> ,",t)})):this.currentState==this.botStatus.TALK_TO_AGENT&&(window.open("https://airbotswana.co.bw/","_blank"),setTimeout((()=>{this.messages.push({id:this.getMessageId(),isMine:!1,text:"Do you need more help? ",author:"Bot",actions:this.botActions}),this.currentState=this.botStatus.HOME_PAGE,this.scrollToBotton()}),3e3))}}},R=P,H=(0,u.Z)(R,i,a,!1,null,"6a8be078",null),K=H.exports,$=o(2930),D=o.n($);s.ZP.config.productionTip=!1,s.ZP.use(F.Z,y.Z),s.ZP.use(D());let C=s.ZP.$toast.open("You did it!");C.dismiss(),s.ZP.$toast.clear(),E.init(),new s.ZP({render:t=>t(K)}).$mount("#app")}},e={};function o(s){var i=e[s];if(void 0!==i)return i.exports;var a=e[s]={id:s,loaded:!1,exports:{}};return t[s].call(a.exports,a,a.exports,o),a.loaded=!0,a.exports}o.m=t,function(){o.amdO={}}(),function(){var t=[];o.O=function(e,s,i,a){if(!s){var n=1/0;for(u=0;u<t.length;u++){s=t[u][0],i=t[u][1],a=t[u][2];for(var r=!0,l=0;l<s.length;l++)(!1&a||n>=a)&&Object.keys(o.O).every((function(t){return o.O[t](s[l])}))?s.splice(l--,1):(r=!1,a<n&&(n=a));if(r){t.splice(u--,1);var h=i();void 0!==h&&(e=h)}}return e}a=a||0;for(var u=t.length;u>0&&t[u-1][2]>a;u--)t[u]=t[u-1];t[u]=[s,i,a]}}(),function(){o.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return o.d(e,{a:e}),e}}(),function(){o.d=function(t,e){for(var s in e)o.o(e,s)&&!o.o(t,s)&&Object.defineProperty(t,s,{enumerable:!0,get:e[s]})}}(),function(){o.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()}(),function(){o.hmd=function(t){return t=Object.create(t),t.children||(t.children=[]),Object.defineProperty(t,"exports",{enumerable:!0,set:function(){throw new Error("ES Modules may not assign module.exports or exports.*, Use ESM export syntax, instead: "+t.id)}}),t}}(),function(){o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)}}(),function(){var t={143:0};o.O.j=function(e){return 0===t[e]};var e=function(e,s){var i,a,n=s[0],r=s[1],l=s[2],h=0;if(n.some((function(e){return 0!==t[e]}))){for(i in r)o.o(r,i)&&(o.m[i]=r[i]);if(l)var u=l(o)}for(e&&e(s);h<n.length;h++)a=n[h],o.o(t,a)&&t[a]&&t[a][0](),t[a]=0;return o.O(u)},s=self["webpackChunkair_chatboat_vue"]=self["webpackChunkair_chatboat_vue"]||[];s.forEach(e.bind(null,0)),s.push=e.bind(null,s.push.bind(s))}();var s=o.O(void 0,[998],(function(){return o(1271)}));s=o.O(s)})();
//# sourceMappingURL=app.b19f1277.js.map